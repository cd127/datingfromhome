angular.module('starter').controller('GamesViewController',function($scope,$log,$state,$stateParams,$http,$translate,Dialog,Customer,Games,$sce,$ionicLoading){angular.extend($scope,{value_id:$stateParams.value_id,});Games.setValueId($stateParams.value_id);$scope.loadContent=function(){var body=document.body,html=document.documentElement;$scope.height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);Games.find().then(function(response){$scope.page_title=response.page_title;$scope.games_settings=response.games_settings},function(){});Games.get().then(function(response){console.log(response);$scope.iframe_url=response['0'].game_url;$scope.url=$sce.trustAsResourceUrl($scope.iframe_url);if(response.length==1){$ionicLoading.show({template:'Loading...',duration:3000});$scope.gamelist="hide"}else{$scope.gameiframe="hide";$scope.games=response}},function(error){Dialog.alert('Error',error.message,'OK',-1)})};$scope.view=function(game_url){$state.go('games-game',{game_url:game_url},{reload:!0})}
window.IframeLoaded=function(){$ionicLoading.hide()}
$scope.loadContent()});angular.module('starter').controller('GamesGameViewController',function($scope,$log,$state,$stateParams,$http,$translate,$ionicPopup,Dialog,Customer,Games,$sce,$ionicLoading){$scope.loadContent=function(){var body=document.body,html=document.documentElement;$scope.height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight);Games.find().then(function(response){$scope.page_title=response.page_title},function(){});$scope.iframe_url=$stateParams.game_url;$scope.game_url=$sce.trustAsResourceUrl($scope.iframe_url);$ionicLoading.show({template:'Loading...',duration:3000})}
window.IframeLoaded=function(){$ionicLoading.hide()}
$scope.loadContent()});angular.module('starter').factory('Games',function($pwaRequest){var factory={value_id:null};factory.setValueId=function(valueId){factory.value_id=valueId};factory.find=function(){var payload=$pwaRequest.getPayloadForValueId(factory.value_id);if(payload!==!1){return $pwaRequest.resolve(payload)}
return $pwaRequest.get('games/mobile_view/find',{urlParams:{value_id:this.value_id}})};factory.get=function(){return $pwaRequest.get('games/mobile_view/get',{urlParams:{value_id:factory.value_id},cache:!1})};return factory});Features.insertCSS("","games")